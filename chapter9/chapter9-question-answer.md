# Chapter9 习题与回答

## 下列关于Time-wait状态的说法错误的是？

1. Time-wait状态只在服务器端的套接字中发生。
2. 断开连接的四次握手过程中，先传输FIN消息的套接字将进入Time-wait状态。
3. Time-wait状态与断开连接的过程无关，而与请求连接过程中SYN消息的传输顺序有关。
4. Time-wait状态通常并非必要，应尽可能通过更改套接字可选项防止其发生。

Answer: 1,3,4

## TCP_NODELAY可选项与Nagle算法有关，可通过它禁用Nagle算法。请问何时应考虑禁用Nagle算法？结合收发数据的特性给出说明

Nagle算法的作用是控制数据包与ACK数据之间的顺序关系，当开启Nagle算法时，套接字的行为是收到ACK后再传输下一个数据包；当关闭Nagle算法时，套接字的行为是只要输出缓冲中有数据就立即执行发送数据包，而不等待上一个传输的数据包的ACK。所以当被传输的数据能迅速填满缓冲则可以选择禁用Nagle算法以减少ACK等待时间，提高数据传输效率。